<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project GENESIS: Doctrine & Order of Battle</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --background-color: #000000; --text-color: #FFFFFF; --border-color: #444444; --accent-color-do: #00FF00; --header-color: #87CEEB; --container-bg: #0A0A0A;}
        html { scroll-behavior: smooth; }
        body { background-color: var(--background-color); color: var(--text-color); font-family: 'JetBrains Mono', monospace; line-height: 1.7; margin: 0; padding: 2em 1em; }
        .container { max-width: 960px; margin: 0 auto; border: 1px solid var(--border-color); padding: 2em 3em; background-color: var(--container-bg); }
        .logo { display: block; width: 150px; margin: 0 auto 3em auto; }
        h1, h2, h3, h4 { font-weight: 700; letter-spacing: 1px; }
        h1 { color: var(--header-color); font-size: 1.8em; text-align: center; margin-bottom: 2em; }
        h2 { color: var(--header-color); font-size: 1.4em; border-bottom: 1px solid var(--border-color); padding-bottom: 0.5em; margin-top: 2.5em; }
        h3 { color: var(--header-color); font-size: 1.2em; margin-top: 2em; }
        p, ul, ol { margin-bottom: 1.5em; }
        strong { font-weight: 700; color: var(--accent-color-do); }
        code { background-color: #1a1a1a; padding: 0.2em 0.4em; border-radius: 4px; font-size: 0.9em; border: 1px solid var(--border-color); }
        pre { background-color: #1a1a1a; padding: 1.5em; border-radius: 4px; border: 1px solid var(--border-color); overflow-x: auto; white-space: pre-wrap; }
        table.doctrine-table { width: 100%; border-collapse: collapse; margin-top: 2em; }
        table.doctrine-table th, table.doctrine-table td { border: 1px solid var(--border-color); padding: 12px; text-align: left; vertical-align: top; }
        table.doctrine-table th { background-color: #1a1a1a; color: var(--header-color); }
    </style>
</head>
<body>
    <div class="container">
        <img src="logo.png" alt="Project GENESIS Logo" class="logo">
        <h1>Project GENESIS Architectural Doctrine & Order of Battle (v3.0, Final)</h1>
        <h2>PREAMBLE</h2>
        <p>This document, version 3.0, is a living artifact evolved from rigorous review. It supersedes all previous versions. Its purpose is to provide not just a philosophy, but a clear, actionable command intent for the development of the GENESIS platform. Its principles are not optional; they are the laws by which we will avoid entropic collapse and achieve our mandate.</p>
        <h2>1. The Mandate: Observe the Battlefield</h2>
        <p>We are tasked with creating an integrated design, test, and manufacturing ecosystem. Our mandate is not to build a <i>simulator</i>, but to build a <b><i>foundry</i></b> for ideas—a platform where users can forge concepts, test them against a simulated reality, and manifest them in the physical world.</p>
        <p>The primary threat to this mandate is not technical but entropic. History shows that complex, monolithic systems inevitably collapse under their own weight. Their internal complexity ("Drag") grows until their ability to adapt ("Maneuverability") approaches zero. They become rigid, brittle, and are outmaneuvered by more agile competitors.</p>
        <p>Our prime directive is to build a system that actively resists this entropy. We will achieve this by architecting for <strong>superior Energy-Maneuverability</strong> at every level of the system's composition.</p>
        <h2>2. The Orienting Philosophy: Defining the E-M State</h2>
        <p>Energy-Maneuverability (E-M) will be our objective measure of fitness for every component, from a single line of code to the entire platform. Every design decision, every pull request, will be judged against this framework.</p>
        <p>An E-M Score is a function of three variables, refined to reflect the complex trade-offs inherent in engineering:</p>
        <ul>
            <li><strong>Ps - "Thrust":</strong> A measure of a component's <strong>capability density and performance</strong>.</li>
            <li><strong>Agility - "Maneuverability":</strong> A measure of a component's <strong>adaptability and resilience to change</strong>.</li>
            <li><strong>Drag - "Complexity":</strong> A measure of a component's <strong>total cost to maintain, understand, integrate, and secure</strong>.</li>
        </ul>
        <p>The governing formula is a living artifact, defined in the Supplementary Material. This is our primary law of survival.</p>
        <h2>3. The Architectural Decision: A Federated, Polyglot Architecture</h2>
        <p>Our architecture is a <strong>federated system of specialized services</strong>. The choice of technology for each component is subordinate to the E-M score that technology provides for its specific role.</p>
        <table class="doctrine-table">
            <thead><tr><th>Role</th><th>Language</th><th>Primary Task</th><th>E-M Verdict</th></tr></thead>
            <tbody>
                <tr><td><b>Commander</b> (Front-End)</td><td>TypeScript</td><td>User Experience & API Orchestration</td><td><strong>Optimal:</strong> Maximum Maneuverability for fast UI iteration.</td></tr>
                <tr><td><b>Engineer</b> (Back-End API)</td><td>Python</td><td>High-Level Design & Business Logic</td><td><strong>Optimal:</strong> Maximum Maneuverability for scripting design logic via the vast CAD/SciPy ecosystem.</td></tr>
                <tr><td><b>Physicist</b> (Back-End Kernel)</td><td>Rust</td><td>Core Physics, Geometry & Simulation</td><td><strong>Optimal:</strong> Maximum Thrust and safety for performance-critical computation.</td></tr>
            </tbody>
        </table>
        <h2>4. The Core Dialectic: The GENESIS Command & Control System</h2>
        <p>Our advantage is our ability to maneuver in the cognitive domain. The OODA Loop is the engine of this process. Its outputs are formalized artifacts:</p>
        <p><b>DECIDE → (Sagas) → ACT → (Echoes) → OBSERVE → (Heroes/Nemeses) → ORIENT → (Virtues/Vices) → DECIDE</b></p>
        <p>This framework is not bureaucratic overhead; it is a clarification of the mental and operational processes required for high-tempo adaptation.</p>
        <h2>5. The Act: Implementation Guardrails & The Command System</h2>
        <ul>
            <li><b>The PR Template is the Saga:</b> A Pull Request formalizes a Saga and its forecasted impact.</li>
            <li><b>Automated Scoring is the Observer:</b> The CI/CD pipeline is an objective observer, providing the E-M Score as a primary Echo.</li>
            <li><b>Peer Review is the Orient Session:</b> The automated score informs the peer review, where qualitative context is assessed.</li>
            <li><b>Justified Overrides:</b> An E-M degrading merge (a Nemesis) may be permitted if justified as a strategic necessity. This action creates formal technical debt.</li>
        </ul>
        <h2>6. Doctrine Governance & Cultural Alignment</h2>
        <p>This is a living document, subject to quarterly review. A culture that embraces this doctrine is paramount. Honesty is a Virtue; gaming metrics is a Nemesis. Leadership will be by action and example.</p>
        <p style="text-align:center; font-weight:bold; margin-top: 4em;">Maneuver is life. Execute.</p>
        <hr style="border: none; border-top: 1px solid var(--border-color); margin: 3em 0;">
        <h2>SUPPLEMENTARY MATERIAL: DOCTRINE IN ACTION (v3.0)</h2>
        <h3>A. Canonical Architecture & Interfaces</h3>
        <ul>
            <li><b>Repositories:</b> <code>genesis-frontend</code>, <code>genesis-api</code>, <code>genesis-kernel</code>.</li>
            <li><b>Interface Standardization:</b> Internal communication via <b>gRPC</b> (Protobufs in <code>genesis-protos</code> repo). External via <b>REST/GraphQL</b> (OpenAPI documented).</li>
        </ul>
        <h3>B. The GENESIS E-M Score Calculator (v2.0)</h3>
        <p>The formula is a weighted model. Weights are configuration parameters stored in each service's repository and will be tuned quarterly based on retrospective (Orient) sessions.</p>
        <pre><code>
def calculate_em_score(
    feature_benchmark_ops_sec: float, baseline_benchmark_ops_sec: float, # Ps
    avg_cyclomatic_complexity: float, num_dependencies: int, test_coverage_percent: float, # Maneuverability
    lines_of_code: int, lint_errors: int, security_vulnerabilities: int, # Drag
    w_ps: float = 0.4, w_maneuver: float = 0.4, w_drag: float = 0.2
) -> dict:
    ps_raw = feature_benchmark_ops_sec / baseline_benchmark_ops_sec if baseline_benchmark_ops_sec > 0 else 1.0
    ps_norm = min(10.0, max(0.0, (ps_raw - 1) * 10 + 5))
    complexity_penalty = avg_cyclomatic_complexity * 0.5
    dependency_penalty = num_dependencies * 0.2
    coverage_bonus = (test_coverage_percent / 100) * 2.0
    maneuver_raw = 10 - complexity_penalty - dependency_penalty + coverage_bonus
    maneuver_norm = min(10.0, max(0.0, maneuver_raw))
    drag_raw = (lines_of_code / 100) + (lint_errors * 0.5) + (security_vulnerabilities * 2.0)
    drag_norm = min(10.0, max(0.0, drag_raw))
    numerator = (w_ps * ps_norm) + (w_maneuver * maneuver_norm)
    denominator = 1 + (w_drag * drag_norm)
    final_score = numerator / denominator
    return { "EM_Score": round(final_score, 2), "Thrust_norm": round(ps_norm, 2), "Maneuverability_norm": round(maneuver_norm, 2), "Drag_norm": round(drag_norm, 2) }
        </code></pre>
    </div>
</body>
</html>
